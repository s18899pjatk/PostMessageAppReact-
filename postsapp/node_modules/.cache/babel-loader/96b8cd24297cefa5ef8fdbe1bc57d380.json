{"ast":null,"code":"import _regeneratorRuntime from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./App.css\";import{Grid}from\"@material-ui/core\";import{BrowserRouter as Router,Switch,Route,Redirect}from\"react-router-dom\";import Login from\"./components/Login\";import Register from\"./components/Register\";import Dashboard from\"./components/Dashboard\";import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';toast.configure();function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthenticated=_useState2[0],setIsAuthenticated=_useState2[1];var setAuth=function setAuth(boolean){setIsAuthenticated(boolean);};var isAuth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp,parseRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5003/api/jwtAuth/is-verify\",{method:\"GET\",headers:{token:localStorage.token}});case 3:resp=_context.sent;_context.next=6;return resp.json();case 6:parseRes=_context.sent;console.log(parseRes);parseRes===true?setIsAuthenticated(true):setIsAuthenticated(false);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function isAuth(){return _ref.apply(this,arguments);};}();useEffect(function(){isAuth();});return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/React.createElement(Redirect,{to:\"/dashboard\"});}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/dashboard\",render:function render(props){return isAuthenticated?/*#__PURE__*/React.createElement(Dashboard,Object.assign({},props,{setAuth:setAuth})):/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"});}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/login\",render:function render(props){return!isAuthenticated?/*#__PURE__*/React.createElement(Login,Object.assign({},props,{setAuth:setAuth})):/*#__PURE__*/React.createElement(Redirect,{to:\"/dashboard\"});}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/register\",render:function render(props){return!isAuthenticated?/*#__PURE__*/React.createElement(Register,Object.assign({},props,{setAuth:setAuth})):/*#__PURE__*/React.createElement(Redirect,{to:\"/dashboard\"});}}))));}export default App;","map":{"version":3,"sources":["/home/artem/PostMessageAppReact-/postsapp/src/App.js"],"names":["React","useState","useEffect","Grid","BrowserRouter","Router","Switch","Route","Redirect","Login","Register","Dashboard","ToastContainer","toast","configure","App","isAuthenticated","setIsAuthenticated","setAuth","boolean","isAuth","fetch","method","headers","token","localStorage","resp","json","parseRes","console","log","error","message","props"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,WAAP,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAGEC,KAHF,CAIEC,QAJF,KAKO,kBALP,CAMA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,OAASC,cAAT,CAAyBC,KAAzB,KAAsC,gBAAtC,CACA,MAAO,uCAAP,CACAA,KAAK,CAACC,SAAN,GAEA,QAASC,CAAAA,GAAT,EAAe,eACiCd,QAAQ,CAAC,KAAD,CADzC,wCACNe,eADM,eACWC,kBADX,eAGb,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,OAAD,CAAa,CACzBF,kBAAkB,CAACE,OAAD,CAAlB,CACH,CAFD,CAIA,GAAMC,CAAAA,MAAM,0FAAG,2LAEQC,CAAAA,KAAK,CAAC,6CAAD,CAAgD,CACtEC,MAAM,CAAE,KAD8D,CAEtEC,OAAO,CAAG,CAACC,KAAK,CAAGC,YAAY,CAACD,KAAtB,CAF4D,CAAhD,CAFb,QAELE,IAFK,qCAOYA,CAAAA,IAAI,CAACC,IAAL,EAPZ,QAOLC,QAPK,eAQXC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAA,QAAQ,GAAK,IAAb,CAAoBX,kBAAkB,CAAC,IAAD,CAAtC,CAA+CA,kBAAkB,CAAC,KAAD,CAAjE,CATW,iFAWXY,OAAO,CAACE,KAAR,CAAc,YAAMC,OAApB,EAXW,qEAAH,kBAANZ,CAAAA,MAAM,0CAAZ,CAeAlB,SAAS,CAAC,UAAM,CACdkB,MAAM,GACP,CAFQ,CAAT,CAIA,mBACE,oBAAC,MAAD,mBACE,oBAAC,IAAD,EAAM,SAAS,KAAf,eACE,oBAAC,MAAD,mBAEA,oBAAC,KAAD,EACI,KAAK,KADT,CAEI,IAAI,CAAC,GAFT,CAGI,MAAM,CAAE,gBAACa,KAAD,qBAEJ,oBAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAFI,EAHZ,EAFA,cAYE,oBAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,YAFP,CAGE,MAAM,CAAE,gBAACA,KAAD,QACNjB,CAAAA,eAAe,cACb,oBAAC,SAAD,kBAAeiB,KAAf,EAAsB,OAAO,CAAEf,OAA/B,GADa,cAGb,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAJI,EAHV,EAZF,cAuBE,oBAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,QAFP,CAGE,MAAM,CAAE,gBAACe,KAAD,QACN,CAACjB,eAAD,cACE,oBAAC,KAAD,kBAAWiB,KAAX,EAAkB,OAAO,CAAEf,OAA3B,GADF,cAGE,oBAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAJI,EAHV,EAvBF,cAkCE,oBAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,WAFP,CAGE,MAAM,CAAE,gBAACe,KAAD,QACN,CAACjB,eAAD,cACE,oBAAC,QAAD,kBAAciB,KAAd,EAAqB,OAAO,CAAEf,OAA9B,GADF,cAGE,oBAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAJI,EAHV,EAlCF,CADF,CADF,CADF,CAoDD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { Grid } from \"@material-ui/core\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Dashboard from \"./components/Dashboard\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\ntoast.configure();\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  const setAuth = (boolean) => {\n      setIsAuthenticated(boolean);\n  }\n\n  const isAuth = async () => {\n    try {\n      const resp = await fetch(\"http://localhost:5003/api/jwtAuth/is-verify\", {\n        method: \"GET\",\n        headers : {token : localStorage.token}\n      });\n\n      const parseRes = await resp.json();\n      console.log(parseRes);\n      parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n\n  useEffect(() => {\n    isAuth();\n  })\n\n  return (\n    <Router>\n      <Grid container>\n        <Switch>\n       \n        <Route\n            exact\n            path=\"/\"\n            render={(props) =>\n             \n                <Redirect to=\"/dashboard\" />\n            \n            }\n          />\n\n          <Route\n            exact\n            path=\"/dashboard\"\n            render={(props) =>\n              isAuthenticated ? (\n                <Dashboard {...props} setAuth={setAuth} />\n              ) : (\n                <Redirect to=\"/login\" />\n              )\n            }\n          />\n          <Route\n            exact\n            path=\"/login\"\n            render={(props) =>\n              !isAuthenticated ? (\n                <Login {...props} setAuth={setAuth} />\n              ) : (\n                <Redirect to=\"/dashboard\" />\n              )\n            }\n          />\n          <Route\n            exact\n            path=\"/register\"\n            render={(props) =>\n              !isAuthenticated ? (\n                <Register {...props} setAuth={setAuth} />\n              ) : (\n                <Redirect to=\"/dashboard\" />\n              )\n            }\n          />\n        </Switch>\n      </Grid>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}