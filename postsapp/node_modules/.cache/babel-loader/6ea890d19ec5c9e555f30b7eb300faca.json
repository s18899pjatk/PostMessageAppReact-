{"ast":null,"code":"import _regeneratorRuntime from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{TextField,Button,Grid,Box}from\"@material-ui/core\";import IconButton from\"@material-ui/core/IconButton\";import DeleteIcon from\"@material-ui/icons/Delete\";import{makeStyles}from\"@material-ui/core/styles\";var useStyles=makeStyles(function(theme){return{root:{\"& > *\":{margin:theme.spacing(1)}},deleteButton:{position:\"relative\"},updateButton:{position:\"relative\"},container:{position:\"relative\"},hiddenDumb:{visibility:\"hidden\"}};});var PostsArea=function PostsArea(_ref){var updateHandler=_ref.updateHandler,deleteHandler=_ref.deleteHandler,arr=_ref.arr;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),txt_content=_useState2[0],setText=_useState2[1];var classes=useStyles();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),m=_useState4[0],setM=_useState4[1];var getUserEmail=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response,parseRes,email;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/api/jwtAuth/\".concat(id),{method:\"GET\",headers:{token:localStorage.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:parseRes=_context.sent;email=parseRes[0].user_email;setM(email);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getUserEmail(_x){return _ref2.apply(this,arguments);};}();var posts=arr.slice(0).reverse().map(function(post){return/*#__PURE__*/React.createElement(Grid,{className:classes.container,key:post.post_id},/*#__PURE__*/React.createElement(Box,{borderTop:1,borderColor:\"primary.main\"},/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(\"h4\",null,\"Posted at \"+post.post_date.slice(0,post.post_date.length-5).replace(/T/,\" \"))),/*#__PURE__*/React.createElement(TextField,{id:\"id\".concat(post.post_id),multiline:true,variant:\"outlined\",rows:8,defaultValue:post.txt_content,xs:8,fullWidth:true,onChange:function onChange(e){return setText(e.currentTarget.value);}}),/*#__PURE__*/React.createElement(IconButton,{className:classes.deleteButton,\"aria-label\":\"delete\",color:\"secondary\",onClick:function onClick(e){e.preventDefault();deleteHandler(post.post_id);}},/*#__PURE__*/React.createElement(DeleteIcon,null)),/*#__PURE__*/React.createElement(Button,{className:classes.updateButton,variant:\"outlined\",color:\"primary\",onClick:function onClick(e){e.preventDefault();updateHandler(post.post_id,{txt_content:txt_content});}},\"Edit\")));});return/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(Grid,null,posts));};export default PostsArea;","map":{"version":3,"sources":["/home/artem/PostMessageAppReact-/postsapp/src/components/PostsArea.js"],"names":["React","useState","TextField","Button","Grid","Box","IconButton","DeleteIcon","makeStyles","useStyles","theme","root","margin","spacing","deleteButton","position","updateButton","container","hiddenDumb","visibility","PostsArea","updateHandler","deleteHandler","arr","txt_content","setText","classes","m","setM","getUserEmail","id","fetch","method","headers","token","localStorage","response","json","parseRes","email","user_email","console","error","message","posts","slice","reverse","map","post","post_id","post_date","length","replace","e","currentTarget","value","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { TextField, Button, Grid, Box } from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1),\n    },\n  },\n  deleteButton: {\n    position: \"relative\",\n  },\n  updateButton: {\n    position: \"relative\",\n  },\n  container: {\n    position: \"relative\",\n  },\n\n  hiddenDumb: {\n    visibility: \"hidden\",\n  },\n}));\n\nconst PostsArea = ({ updateHandler, deleteHandler, arr }) => {\n  const [txt_content, setText] = useState(\"\");\n  const classes = useStyles();\n  const [m, setM] = useState(\"\");\n\n  const getUserEmail = async function (id) {\n    try {\n      const response = await fetch(`/api/jwtAuth/${id}`, {\n        method: \"GET\",\n        headers: { token: localStorage.token },\n      });\n      const parseRes = await response.json();\n      let email = parseRes[0].user_email;\n      setM(email);\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  let posts = arr\n    .slice(0)\n    .reverse()\n    .map((post) => (\n      <Grid className={classes.container} key={post.post_id}>\n        <Box borderTop={1} borderColor=\"primary.main\">\n          <Grid>\n            <h4>\n              {\"Posted at \" +\n                post.post_date\n                  .slice(0, post.post_date.length - 5)\n                  .replace(/T/, \" \")}\n            </h4>\n          </Grid>\n          <TextField\n            id={`id${post.post_id}`}\n            multiline\n            variant=\"outlined\"\n            rows={8}\n            defaultValue={post.txt_content}\n            xs={8}\n            fullWidth\n            onChange={(e) => setText(e.currentTarget.value)}\n          />\n\n          <IconButton\n            className={classes.deleteButton}\n            aria-label=\"delete\"\n            color=\"secondary\"\n            onClick={(e) => {\n              e.preventDefault();\n              deleteHandler(post.post_id);\n            }}\n          >\n            <DeleteIcon />\n          </IconButton>\n\n          <Button\n            className={classes.updateButton}\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={(e) => {\n              e.preventDefault();\n              updateHandler(post.post_id, { txt_content });\n            }}\n          >\n            Edit\n          </Button>\n        </Box>\n      </Grid>\n    ));\n\n  return (\n    <Grid>\n      <Grid>{posts}</Grid>\n    </Grid>\n  );\n};\nexport default PostsArea;\n"]},"metadata":{},"sourceType":"module"}