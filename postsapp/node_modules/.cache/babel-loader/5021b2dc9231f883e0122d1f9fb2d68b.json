{"ast":null,"code":"import _regeneratorRuntime from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Grid,Button}from\"@material-ui/core\";import Avatar from\"@material-ui/core/Avatar\";import TextField from\"@material-ui/core/TextField\";import Link from\"@material-ui/core/Link\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import{toast}from\"react-toastify\";var useStyles=makeStyles(function(theme){return{root:{height:\"100vh\"},image:{backgroundImage:\"url(https://cdn.filestackcontent.com/G33P8iuoRuinYep5O6dt)\",backgroundRepeat:\"no-repeat\",backgroundColor:theme.palette.type===\"light\"?theme.palette.grey[50]:theme.palette.grey[900],backgroundSize:\"cover\",backgroundPosition:\"center\"},paper:{margin:theme.spacing(8,4),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.primary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)},multilineColor:{color:\"white\"},floatingLabelFocusStyle:{color:\"white\"}};});var Login=function Login(_ref){var setAuth=_ref.setAuth;var classes=useStyles();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var email=inputs.email,password=inputs.password;var _onChange=function onChange(e){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmitForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var body,response,parseResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;body={email:email,password:password};_context.next=5;return fetch(\"/api/jwtAuth/login\",{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify(body)});case 5:response=_context.sent;_context.next=8;return response.json();case 8:parseResponse=_context.sent;if(parseResponse.token){localStorage.setItem(\"token\",parseResponse.token);setAuth(true);toast.success(\"loged in\");}else{setAuth(false);toast.error(parseResponse);}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function onSubmitForm(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Grid,{container:true,component:\"main\",className:classes.root},/*#__PURE__*/React.createElement(Grid,{item:true,xs:false,sm:4,md:7,className:classes.image}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:8,md:5,elevation:6,square:true},/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Avatar,{className:classes.avatar},/*#__PURE__*/React.createElement(LockOutlinedIcon,null)),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\",color:\"primary\"},\"Sign in\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,onSubmit:onSubmitForm},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",InputProps:{className:classes.multilineColor},InputLabelProps:{className:classes.floatingLabelFocusStyle},defaultValue:email,onChange:function onChange(e){return _onChange(e);},autoFocus:true}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",InputProps:{className:classes.multilineColor},InputLabelProps:{className:classes.floatingLabelFocusStyle},defaultValue:password,onChange:function onChange(e){return _onChange(e);},autoComplete:\"current-password\"}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit},\"Sign In\"),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Link,{href:\"/register\",variant:\"body2\"},\"Don't have an account? Sign Up\")))))));};export default Login;","map":{"version":3,"sources":["/home/artem/PostMessageAppReact-/postsapp/src/components/Login.js"],"names":["React","useState","Grid","Button","Avatar","TextField","Link","LockOutlinedIcon","Typography","makeStyles","toast","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","primary","main","form","width","marginTop","submit","multilineColor","color","floatingLabelFocusStyle","Login","setAuth","classes","email","password","inputs","setInputs","onChange","e","target","name","value","onSubmitForm","preventDefault","body","fetch","method","headers","JSON","stringify","response","json","parseResponse","token","localStorage","setItem","success","error","console","message","className"],"mappings":"8xBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,mBAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAAQC,KAAR,KAAoB,gBAApB,CAEA,GAAMC,CAAAA,SAAS,CAAGF,UAAU,CAAC,SAACG,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,MAAM,CAAE,OADJ,CADiC,CAIvCC,KAAK,CAAE,CACLC,eAAe,CACb,4DAFG,CAGLC,gBAAgB,CAAE,WAHb,CAILC,eAAe,CACbN,KAAK,CAACO,OAAN,CAAcC,IAAd,GAAuB,OAAvB,CACIR,KAAK,CAACO,OAAN,CAAcE,IAAd,CAAmB,EAAnB,CADJ,CAEIT,KAAK,CAACO,OAAN,CAAcE,IAAd,CAAmB,GAAnB,CAPD,CAQLC,cAAc,CAAE,OARX,CASLC,kBAAkB,CAAE,QATf,CAJgC,CAevCC,KAAK,CAAE,CACLC,MAAM,CAAEb,KAAK,CAACc,OAAN,CAAc,CAAd,CAAiB,CAAjB,CADH,CAELC,OAAO,CAAE,MAFJ,CAGLC,aAAa,CAAE,QAHV,CAILC,UAAU,CAAE,QAJP,CAfgC,CAqBvCC,MAAM,CAAE,CACNL,MAAM,CAAEb,KAAK,CAACc,OAAN,CAAc,CAAd,CADF,CAENR,eAAe,CAAEN,KAAK,CAACO,OAAN,CAAcY,OAAd,CAAsBC,IAFjC,CArB+B,CAyBvCC,IAAI,CAAE,CACJC,KAAK,CAAE,MADH,CACW;AACfC,SAAS,CAAEvB,KAAK,CAACc,OAAN,CAAc,CAAd,CAFP,CAzBiC,CA6BvCU,MAAM,CAAE,CACNX,MAAM,CAAEb,KAAK,CAACc,OAAN,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CADF,CA7B+B,CAgCvCW,cAAc,CAAE,CACdC,KAAK,CAAE,OADO,CAhCuB,CAoCvCC,uBAAuB,CAAE,CACvBD,KAAK,CAAE,OADgB,CApCc,CAAZ,EAAD,CAA5B,CAyCA,GAAME,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAC7B,GAAMC,CAAAA,OAAO,CAAG/B,SAAS,EAAzB,CAD6B,cAEDV,QAAQ,CAAC,CACnC0C,KAAK,CAAE,EAD4B,CAEnCC,QAAQ,CAAE,EAFyB,CAAD,CAFP,wCAEtBC,MAFsB,eAEdC,SAFc,kBAOrBH,CAAAA,KAPqB,CAODE,MAPC,CAOrBF,KAPqB,CAOdC,QAPc,CAODC,MAPC,CAOdD,QAPc,CAS7B,GAAMG,CAAAA,SAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBF,SAAS,gCAAMD,MAAN,wBAAeG,CAAC,CAACC,MAAF,CAASC,IAAxB,CAA+BF,CAAC,CAACC,MAAF,CAASE,KAAxC,GAAT,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOJ,CAAP,kJAClBA,CAAC,CAACK,cAAF,GADkB,gBAGXC,IAHW,CAGJ,CAACX,KAAK,CAALA,KAAD,CAAQC,QAAQ,CAARA,QAAR,CAHI,uBAIMW,CAAAA,KAAK,CAC1B,oBAD0B,CAE1B,CACAC,MAAM,CAAE,MADR,CAEAC,OAAO,CAAE,CAAC,eAAiB,kBAAlB,CAFT,CAGAH,IAAI,CAAGI,IAAI,CAACC,SAAL,CAAeL,IAAf,CAHP,CAF0B,CAJX,QAIXM,QAJW,qCAWWA,CAAAA,QAAQ,CAACC,IAAT,EAXX,QAWXC,aAXW,eAajB,GAAGA,aAAa,CAACC,KAAjB,CAAuB,CACrBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,aAAa,CAACC,KAA5C,EACAtB,OAAO,CAAC,IAAD,CAAP,CACA/B,KAAK,CAACwD,OAAN,CAAc,UAAd,EACD,CAJD,IAIO,CACLzB,OAAO,CAAC,KAAD,CAAP,CACA/B,KAAK,CAACyD,KAAN,CAAYL,aAAZ,EACD,CApBgB,iFAuBjBM,OAAO,CAACD,KAAR,CAAc,YAAME,OAApB,EAvBiB,qEAAH,kBAAZjB,CAAAA,YAAY,6CAAlB,CA2BA,mBACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,SAAS,CAAC,MAA1B,CAAiC,SAAS,CAAEV,OAAO,CAAC7B,IAApD,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,KAAf,CAAsB,EAAE,CAAE,CAA1B,CAA6B,EAAE,CAAE,CAAjC,CAAoC,SAAS,CAAE6B,OAAO,CAAC3B,KAAvD,EADF,cAEE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,CAA0B,EAAE,CAAE,CAA9B,CAAiC,SAAS,CAAE,CAA5C,CAA+C,MAAM,KAArD,eACE,2BAAK,SAAS,CAAE2B,OAAO,CAAClB,KAAxB,eACE,oBAAC,MAAD,EAAQ,SAAS,CAAEkB,OAAO,CAACZ,MAA3B,eACE,oBAAC,gBAAD,MADF,CADF,cAIE,oBAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,CAAwC,KAAK,CAAC,SAA9C,YAJF,cAOE,4BAAM,SAAS,CAAEY,OAAO,CAACT,IAAzB,CAA+B,QAAQ,CAAEmB,YAAzC,eACE,oBAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,MAAM,CAAC,QAFT,CAGE,QAAQ,KAHV,CAIE,SAAS,KAJX,CAKE,EAAE,CAAC,OALL,CAME,KAAK,CAAC,eANR,CAOE,IAAI,CAAC,OAPP,CAQE,YAAY,CAAC,OARf,CASE,UAAU,CAAE,CACVkB,SAAS,CAAE5B,OAAO,CAACL,cADT,CATd,CAYE,eAAe,CAAE,CACfiC,SAAS,CAAE5B,OAAO,CAACH,uBADJ,CAZnB,CAeE,YAAY,CAAEI,KAfhB,CAgBE,QAAQ,CAAE,kBAACK,CAAD,QAAOD,CAAAA,SAAQ,CAACC,CAAD,CAAf,EAhBZ,CAiBE,SAAS,KAjBX,EADF,cAoBE,oBAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,MAAM,CAAC,QAFT,CAGE,QAAQ,KAHV,CAIE,SAAS,KAJX,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAC,UANR,CAOE,IAAI,CAAC,UAPP,CAQE,EAAE,CAAC,UARL,CASE,UAAU,CAAE,CACVsB,SAAS,CAAE5B,OAAO,CAACL,cADT,CATd,CAYE,eAAe,CAAE,CACfiC,SAAS,CAAE5B,OAAO,CAACH,uBADJ,CAZnB,CAeE,YAAY,CAAEK,QAfhB,CAgBE,QAAQ,CAAE,kBAACI,CAAD,QAAOD,CAAAA,SAAQ,CAACC,CAAD,CAAf,EAhBZ,CAiBE,YAAY,CAAC,kBAjBf,EApBF,cAuCE,oBAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,SAAS,KAFX,CAGE,OAAO,CAAC,WAHV,CAIE,KAAK,CAAC,SAJR,CAKE,SAAS,CAAEN,OAAO,CAACN,MALrB,YAvCF,cAgDE,oBAAC,IAAD,EAAM,SAAS,KAAf,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,eACE,oBAAC,IAAD,EAAM,IAAI,CAAC,WAAX,CAAuB,OAAO,CAAC,OAA/B,EACG,gCADH,CADF,CADF,CAhDF,CAPF,CADF,CAFF,CADF,CAuED,CA/GD,CAgHA,cAAeI,CAAAA,KAAf","sourcesContent":["import React, {useState} from \"react\";\nimport { Grid, Button } from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Link from \"@material-ui/core/Link\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {toast} from \"react-toastify\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  image: {\n    backgroundImage:\n      \"url(https://cdn.filestackcontent.com/G33P8iuoRuinYep5O6dt)\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundColor:\n      theme.palette.type === \"light\"\n        ? theme.palette.grey[50]\n        : theme.palette.grey[900],\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\",\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.primary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  multilineColor: {\n    color: \"white\",\n  },\n\n  floatingLabelFocusStyle: {\n    color: \"white\",\n  },\n}));\n\nconst Login = ({ setAuth }) => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const { email, password } = inputs;\n\n  const onChange = (e) => {\n    setInputs({ ...inputs, [e.target.name]: e.target.value });\n  };\n\n  const onSubmitForm = async (e) => {\n     e.preventDefault();\n    try {\n      const body = {email, password}\n      const response = await fetch(\n        \"/api/jwtAuth/login\"\n      , {\n        method: \"POST\",\n        headers: {\"Content-type\" : \"application/json\"},\n        body : JSON.stringify(body),\n      });\n      const parseResponse = await response.json();\n      \n      if(parseResponse.token){\n        localStorage.setItem(\"token\", parseResponse.token);\n        setAuth(true);\n        toast.success(\"loged in\");\n      } else {\n        setAuth(false);\n        toast.error(parseResponse);\n      }\n\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\n      <Grid item xs={12} sm={8} md={5} elevation={6} square>\n        <div className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\" color=\"primary\">\n            Sign in\n          </Typography>\n          <form className={classes.form} onSubmit={onSubmitForm} >\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email Address\"\n              name=\"email\"\n              autoComplete=\"email\"\n              InputProps={{\n                className: classes.multilineColor,\n              }}\n              InputLabelProps={{\n                className: classes.floatingLabelFocusStyle,\n              }}\n              defaultValue={email}\n              onChange={(e) => onChange(e)}\n              autoFocus\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              InputProps={{\n                className: classes.multilineColor,\n              }}\n              InputLabelProps={{\n                className: classes.floatingLabelFocusStyle,\n              }}\n              defaultValue={password}\n              onChange={(e) => onChange(e)}\n              autoComplete=\"current-password\"\n            />\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n            >\n              Sign In\n            </Button>\n            <Grid container>\n              <Grid item>\n                <Link href=\"/register\" variant=\"body2\">\n                  {\"Don't have an account? Sign Up\"}\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        </div>\n      </Grid>\n    </Grid>\n  );\n};\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}