{"ast":null,"code":"import _regeneratorRuntime from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/artem/PostMessageAppReact-/postsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{TextField,Button,Grid}from\"@material-ui/core\";import IconButton from\"@material-ui/core/IconButton\";import DeleteIcon from\"@material-ui/icons/Delete\";import{makeStyles}from\"@material-ui/core/styles\";var useStyles=makeStyles(function(theme){return{root:{\"& > *\":{margin:theme.spacing(1)}},deleteButton:{position:\"absolute\",top:\"0\",right:\"0\",margin:\"10px\"},updateButton:{position:\"absolute\",top:\"5px\",right:\"50px\",margin:\"10px\"},container:{position:\"relative\"}};});var PostsArea=function PostsArea(_ref){var updateHandler=_ref.updateHandler,deleteHandler=_ref.deleteHandler,arr=_ref.arr;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),txt_content=_useState2[0],setText=_useState2[1];var classes=useStyles();var getUserName=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var email,response,parseRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=\"\";_context.prev=1;_context.next=4;return fetch(\"/api/jwtAuth/\".concat(id),{method:\"GET\",headers:{token:localStorage.token}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:parseRes=_context.sent;console.log(parseRes[0].user_email);email=parseRes[0].user_email;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 15:return _context.abrupt(\"return\",email);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function getUserName(_x){return _ref2.apply(this,arguments);};}();var posts=arr.slice(0).reverse().map(function(post){return/*#__PURE__*/React.createElement(Grid,{className:classes.container,key:post.post_id},/*#__PURE__*/React.createElement(TextField,{id:\"id\".concat(post.post_id),multiline:true,variant:\"outlined\",rows:8,defaultValue:post.txt_content,xs:8,fullWidth:true,onChange:function onChange(e){return setText(e.currentTarget.value);}}),/*#__PURE__*/React.createElement(IconButton,{className:classes.deleteButton,\"aria-label\":\"delete\",color:\"secondary\",onClick:function onClick(e){e.preventDefault();deleteHandler(post.post_id);}},/*#__PURE__*/React.createElement(DeleteIcon,null)),/*#__PURE__*/React.createElement(Button,{className:classes.updateButton,variant:\"outlined\",color:\"primary\",onClick:function onClick(e){e.preventDefault();updateHandler(post.post_id,{txt_content:txt_content});}},\"Edit\"),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(\"h3\",null,\"Created at: \"+post.post_date.slice(0,post.post_date.length-5).replace(/T/,\" \")+\"by: \"+getUserName(post.user_id))));});return/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(Grid,null,posts));};export default PostsArea;","map":{"version":3,"sources":["/home/artem/PostMessageAppReact-/postsapp/src/components/PostsArea.js"],"names":["React","useState","TextField","Button","Grid","IconButton","DeleteIcon","makeStyles","useStyles","theme","root","margin","spacing","deleteButton","position","top","right","updateButton","container","PostsArea","updateHandler","deleteHandler","arr","txt_content","setText","classes","getUserName","id","email","fetch","method","headers","token","localStorage","response","json","parseRes","console","log","user_email","error","message","posts","slice","reverse","map","post","post_id","e","currentTarget","value","preventDefault","post_date","length","replace","user_id"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { TextField, Button, Grid } from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1),\n    },\n  },\n  deleteButton: {\n    position: \"absolute\",\n    top: \"0\",\n    right: \"0\",\n    margin: \"10px\",\n  },\n  updateButton: {\n    position: \"absolute\",\n    top: \"5px\",\n    right: \"50px\",\n    margin: \"10px\",\n  },\n  container: {\n    position: \"relative\",\n  },\n}));\n\nconst PostsArea = ({ updateHandler, deleteHandler, arr }) => {\n  const [txt_content, setText] = useState(\"\");\n  const classes = useStyles();\n  \n  const getUserName = async (id) => {\n    let email = \"\"\n    try {\n      const response = await fetch(`/api/jwtAuth/${id}`, {\n        method: \"GET\",\n        headers: { token: localStorage.token },\n      });\n      const parseRes = await response.json();\n      console.log(parseRes[0].user_email);\n\n      email = parseRes[0].user_email;\n    } catch (error) {\n      console.error(error.message);\n    }\n    return email;\n  }\n\n  let posts = arr\n    .slice(0)\n    .reverse()\n    .map((post) => (\n      <Grid className={classes.container} key={post.post_id}>\n        <TextField\n          id={`id${post.post_id}`}\n          multiline\n          variant=\"outlined\"\n          rows={8}\n          defaultValue={post.txt_content}\n          xs={8}\n          fullWidth\n          onChange={(e) => setText(e.currentTarget.value)}\n        />\n\n        <IconButton\n          className={classes.deleteButton}\n          aria-label=\"delete\"\n          color=\"secondary\"\n          onClick={(e) => {\n            e.preventDefault();\n            deleteHandler(post.post_id);\n          }}\n        >\n          <DeleteIcon />\n        </IconButton>\n\n        <Button\n          className={classes.updateButton}\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={(e) => {\n            e.preventDefault();\n            updateHandler(post.post_id, { txt_content });\n          }}\n        >\n          Edit\n        </Button>\n        <Grid container>\n          <h3>\n            {\"Created at: \" +\n              post.post_date\n                .slice(0, post.post_date.length - 5)\n                .replace(/T/, \" \") +\n              \"by: \" + getUserName(post.user_id) }\n          </h3>\n        </Grid>\n      </Grid>\n    ));\n\n  return (\n    <Grid>\n      <Grid>{posts}</Grid>\n    </Grid>\n  );\n};\nexport default PostsArea;\n"]},"metadata":{},"sourceType":"module"}